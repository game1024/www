---
title: "正式开源! Penio"
description: ""
createdAt: 2026-02-15 16:43
updatedAt: 2026-02-15 16:43
category: "开发日记"
tags: ["penio", "开源", "tauri"]
---
import {Image} from "astro:assets";
import PenioIcon from "./penio.webp";
import 鼠标点击特效 from "./鼠标点击特效.mp4";
import 键盘回显 from "./键盘回显.mp4";
import 屏幕标注 from "./屏幕标注.mp4";

:::github{repo="game1024/Penio"}
:::

# 前言

在写Penio之前，我有使用过类似的工具，如ppink，presentify但是发现总是有一些地方，我不太满意

正好那会对tauri开发比较干兴趣，所以自己就决定开发了

本来是准备商业化的，但是经过几个月的运营，发现很少有人愿意付费，所以就干脆开源出来

欢迎社区的用户一起使用和二次开发~



# 功能介绍

## 鼠标特效

最开始的时候，Penio只有给鼠标添加点击动画的功能

<video controls autoPlay loop className="max-w-sm block mb-4">
  <source src={鼠标点击特效} type="video/mp4" />
</video>

## 键盘回显

不过随着迭代，我又给Penio添加了键盘回显，方便在视频中显示快捷键操作
<video controls autoPlay loop className="max-w-sm block mb-4">
  <source src={键盘回显} type="video/mp4" />
</video>

## 屏幕标注

在屏幕中想要勾画出标注一些重要的地方时，我又添加了屏幕标注功能
<video controls autoPlay loop className="max-w-sm block mb-4">
  <source src={屏幕标注} type="video/mp4" />
</video>

:::note
屏幕标注基于excalidraw开发，集成的效果非常好，手绘风格与教学视频也非常契合
:::

## 跨平台
得益于tauri，Penio可以同时在windows、macos、linux(x11)上使用，并且功能完全一样

# 开发记录

## App图标
一个笔的形状，代表了Penio的屏幕画笔核心功能
<Image src={PenioIcon} alt="Penio图标" className="w-16 h-16 mb-4" />

:::note
图标我是直接使用Inkscape，基于iconfont上的图标修改得到
:::

## 窗口透明
:::note
macos，需要设置`macOSPrivateApi=true`，才能使用transparent api
:::

在tauri中实现窗口透明非常简单，只需要在创建窗口的时候设置`transparent: true`即可
```rust title="lib.rs"
let window = tauri::WebviewWindowBuilder::new(
        app,
        &window_label,
        tauri::WebviewUrl::App("/motion-board.html".into()),
    )
    .title(&format!("Motion Board {}", index))
    .inner_size(800.0, 600.0)
    .transparent(true)
```


也可以在tauri.conf.json中设置

```json title="tauri.conf.json" {3,7}
{
  "app": {
    "macOSPrivateApi": true,
    "windows": [
      {
        "title": "...",
        "transparent": true,
        ...
      }
    ]
  }
}
```


## 窗口无边框

其实在使用tauri开发的过程中，并非一帆风顺，尤其是tauri中的api在不同系统上的表现不一样

比如，我想要实现窗口全屏+无边框效果

```rust title="lib.rs"
#[cfg(target_os = "windows")]
{
  // decorations本来是控制窗口边框的, 但是这里必须设置为true
  // 否则会在顶部出现奇怪的幽灵标题栏
  window.set_decorations(true).unwrap();
  window.set_fullscreen(true).unwrap();
}

#[cfg(target_os = "macos")]
{
  //而在macos上则需要设置为false才行
  window.set_decorations(false).unwrap();

  // 特别坑的地方！！！
  // 1. macos不能使用set_fullscreen全屏，否则会同时创建虚拟桌面,让窗口独占一个桌面
  // 2. macos不能使用maximize最大化，否则窗口将无法移动
  // 3. 只能通过设置窗口大小为屏幕大小来实现全屏
  let size = monitor.size();
  window
    .set_size(
      tauri::PhysicalSize::new(
          size.width as f64,
          size.height as f64,
      ))
    .unwrap();
}
```

## JS创建窗口
在tauri中，如果你想要用javascript创建窗口, 你必须将command声明为`async command`

否则会让整个应用阻塞住

```rust title="lib.rs" mark=/async/

// 必须带上async关键字, 否则当前端调用命令时会直接阻塞整个应用
#[tauri::command]
async fn refresh_monitors(app: AppHandle, emit_event: bool) -> Result<(), String> {
   // ... 创建窗口的代码
}

// 不能这样写！！！
#[tauri::command]
 fn refresh_monitors(app: AppHandle, emit_event: bool) -> Result<(), String> {
   ...
}
```

## 屏幕像素单位
如果你想要在tauri中获取屏幕的大小，你必须要知道tauri在不同平台上单位的区别

- `windows`是物理像素单位

- `macos`是逻辑像素单位

- `linux`是物理像素单位

# 整体总结
总的来说，tauri是一个非常不错的跨平台桌面应用开发框架，虽然开发过程中有一些小的毛病，但是基本都能找到对应的解决方案

如果你是准备找一个能够快速开发，更现代的跨平台框架，我强烈推荐你试试tauri。

除了跨平台外，tauri其他方面也非常优秀
1. Rust生态的cargo包管理简直不要太方便
2. tauri 自带标准的 Github Action 工作流，轻易就能实现CI/CD
3. tauri 官方提供了大量的系统插件(托盘，通知，文件系统等)，开箱即用